@startuml SunsightsERD

!define ENTITY(name,desc) class name as "desc" << (E,#FFD4D4) >>
skinparam class {
    BackgroundColor White
    BorderColor #999999
    ArrowColor #666666
    HeaderBackgroundColor #FFD4D4
}

' Add top margin
top to bottom direction
skinparam Padding 2
skinparam linetype ortho
skinparam nodesep 50
skinparam ranksep 40

ENTITY(Users, "Users") {
    id
    email
    password_hash
    name
    role
    created_at
    last_login
    reset_token
}

ENTITY(Profiles, "Profiles") {
    user_id
    name
    title
    location
    bio
    avatar_url
    cover_url
    stats
    recent_activity
}

ENTITY(Files, "UploadedFiles") {
    id
    user_id
    filename
    file_type
    status
    uploaded_at
    file_path
}

ENTITY(Comments, "Comments") {
    id
    user_id
    file_id
    content
    created_at
}

ENTITY(Analysis, "CommentAnalysis") {
    id
    comment_id
    sentiment_score
    emotion
    priority
    analyzed_at
}

ENTITY(Logs, "ActivityLogs") {
    id
    user_id
    action
    description
    logged_at
}

' Layout control
Users -[hidden]right- Files
Files -[hidden]down- Comments
Comments -[hidden]right- Analysis
Analysis -[hidden]right- Logs
Users -[hidden]down- Profiles

' Relationships exactly as shown in diagram
Users ||--|| Profiles
Users --|| Files
Users --o{ Comments
Files --o{ Comments
Comments --|| Analysis
Analysis }o--|| Logs

@enduml
